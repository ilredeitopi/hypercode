
<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="../../bower_components/prism-element/prism-highlighter.html">
<link rel="import" href="../../bower_components/prism-element/prism-theme-default.html">

<dom-module id="hc-file-displayer">

  <style include="prism-theme-default">
    
    #main{
      background-color: #f2f2f2;
      font-family: "Helvetica Neue",Helvetica, Arial, sans-serif;
      position: absolute;
      white-space: nowrap;
      overflow: hidden;
    }
    h1{
      text-align: center;
      margin: 1vmin;
      font-weight: normal;
    }
    #body{
      margin:1vmin;
       overflow: scroll;
       height: 100%;
       
    }
    .passive{
      background-color: #b3b3b3;
    }
    .active{

    }

    
  </style>
  <template>
    <div modelid="{{id}}" id="main" >
      <h1 on-click="toggleactive">Example.java</h1>
      <div id="body" class="passive">
      this is body
      <pre id="output" contenteditable$="[[isEditable]]"></pre></div>
      <prism-highlighter></prism-highlighter>
      
      
    </div>
 
  

  </template>


  <script>
  (function () {
    'use strict';

    Polymer({
      is: 'hc-file-displayer',
      properties: {
        height:{
          type: Number,
          notify:true
        },
        width:{
          type: Number,
          notify:true
        },
        id:{
          type:String,
          notify:true
        },
        code:{
          type:String,
          observer: '_render',
          value: "class Project{\n\n String title;\n Repository repo;\n\n}"
        },
        isEditable:{
          type: Boolean,
          value: false
        }

      },
      attached: function() {
        this._render();
        this.$.main.style.width=this.width+"px"
        this.$.main.style.height=this.height+"px"
        if(this.isEditable){
          this.$.body.className = "active style-scope hc-file-displayer";
        }else{
          this.$.body.className = "passive style-scope hc-file-displayer";
        }
      },
      _render: function() {
        this.$.output.innerHTML = this.highlight(this.code, 'js');
      },
      highlight: function(code, lang) {
        return this.fire('syntax-highlight', {code: code, lang: lang}).detail.code;
      },
      toggleactive: function(){
        this.isEditable = !this.isEditable;
        if(this.isEditable){
          this.$.body.className = "active style-scope hc-file-displayer";
        }else{
          this.$.body.className = "passive style-scope hc-file-displayer";
        }
        console.log(this.isEditable);
        console.log(this.$.output.contenteditable);  
      }




    });
})();
  </script>

</dom-module>