
<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="../../bower_components/prism-element/prism-highlighter.html">
<link rel="import" href="../../bower_components/prism-element/prism-theme-default.html">
<link rel="import" href="../../css/prism-theme-dark.html">
<link rel="import" href="../../bower_components/prism-element/demo/prism-demo.html">
<link rel="import" href="../../bower_components/prism-element/prism-import.html">

<dom-module id="hc-file-displayer">

  <style>
    
    #main{
      background-color: #f2f2f2;
      font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
      position: absolute;
      white-space: nowrap;
      overflow: hidden;
      transition: width 2s, height 2s;
    }
    h1{
      text-align: center;
      margin: 1vmin;
      font-weight: normal;
    }
    #body{
      margin:1vmin;
       overflow: scroll;
       height: 100%;
       font-family: 'Courier New' ,monospace;
    }
    .passive{
      background-color: black;
      font-weight: 100;
      color: white;
    }
    .active{

    }

    
  </style>
  <template>
    <div modelid="{{id}}" id="main" >
      <h1 on-click="toggleactive">{{title}}</h1>
      <div id="body" class="passive" contenteditable$="[[isEditable]]" spellcheck="false">
          

         <prism-highlighter></prism-highlighter>
         <code>
          <pre id="output"></pre>
          </code>
        
      </div>
      
      
      
    </div>
  

  </template>


  <script>
  (function () {
    'use strict';

    Polymer({
      is: 'hc-file-displayer',
      properties: {
        height:{
          type: Number,
          notify:true,
          observer:"resize"
        },
        width:{
          type: Number,
          notify:true,
          observer:"resize"
        },
        id:{
          type:String,
          notify:true
        },
        code:{
          type:String,
          observer: '_render',
          value: 'class Project{\n\n String title = "Example";\n Repository repo = new Repository();\n\n}'
        },
        isEditable:{
          type: Boolean,
          value: false
        },
        title:{
          type:String,
          value: 'Example.java'
        }

      },
      attached: function() {
        this._render();
        this.$.main.style.width=this.width+"px"
        this.$.main.style.height=this.height+"px"
        if(this.isEditable){
          this.$.body.className = "active style-scope hc-file-displayer";
        }else{
          this.$.body.className = "passive style-scope hc-file-displayer";
        }
      },

      _render: function() {
        console.log(Prism.languages)
        this.$.output.innerHTML = this.highlight(this.code, Prism.languages.js);
      },
      highlight: function(code, lang) {
        return Prism.highlight(code, lang);
        // return this.fire('syntax-highlight', {code: code, lang: 'java'}).detail.code;
      },

      resize:function(){
        this.$.main.style.width=this.width+"px"
        this.$.main.style.height=this.height+"px"
      },
      
      toggleactive: function(){
        this.isEditable = !this.isEditable;
        if(this.isEditable){
          this.$.body.className = "active style-scope hc-file-displayer";
          // this.$.styleimport.setAttribute('include') = "prism-theme-default";
        }else{
          this.$.body.className = "passive style-scope hc-file-displayer";
          // this.$.styleimport.setAttribute('include') = "prism-theme-dark";
        }
      }



    });
})();
  </script>
  

</dom-module>